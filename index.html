<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/stylelogin.css">
    <link rel="icon" href="./imagens/icon.png" type="image/x-icon">
    <script src="https://unpkg.com/scrollreveal"></script>
    <title>Login de Usuário</title>
</head>
<body>
    <div class="container-login" id="container-login">
        <div class="logo-container">
            <img src="./imagens/logo-user.png" alt="Logo Usuário" height="80px">
        </div>

        <div class="input-container">
            <div class="img-input">
                <img src="./imagens/email.png" alt="" height="15px">
            </div>
            <input type="email" placeholder="Digite seu email..." required id="email">
        </div>

        <div class="input-container">
            <div class="img-input">
                <img src="./imagens/passwordfechado.png" alt="" height="20px">
            </div>
            <input type="password" placeholder="Digite sua senha..." required id="senha">
            <div class="viewpassword" onclick="viewPassword()">
                <img id="togglePassword" src="imagens/olhofechado.png" alt="" height="20px">
            </div>
        </div>

        <div class="button-container">
            <button onclick="logar(event)">Entrar</button>
        </div>

        <a href="#" class="forgot-password">Esqueceu a senha?</a>
        <a href="./cadastro.html" class="forgot-password">Cadastre-se</a>
    </div>
    <script>
        //Logar no sistema
        async function logar(event) {
            event.preventDefault();

            const email = document.getElementById("email").value;
            const senha = document.getElementById("senha").value;

            if (!email || !senha) {
                alert('Por favor, preencha todos os campos!');
                return;
            }

            if(email === 'admin' && senha === 'admin'){
                alert("Acessando...")
                window.location.href = 'system.html'
            } else {
                alert('Erro ao inserir senha. tente novamente...')
            }

            // try {
            //     const response = await fetch('https://web-production-b392.up.railway.app/users/login', {
            //         method: 'POST',
            //         headers: {
            //             'Content-Type': 'application/json',
            //         },
            //         body: JSON.stringify({ email, password: senha })
            //     });

            //     const data = await response.json();

            //     if (response.ok) {
            //         localStorage.setItem('token', data.token);  // Armazena o token
            //         alert('Login bem-sucedido! Redirecionando...');
            //         window.location.href = 'system.html';
            //     } else {
            //         alert(`Erro: ${data.message}`);
            //     }

            // } catch (error) {
            //     console.error('Erro ao tentar fazer login', error);
            //     alert('Erro ao tentar fazer login. Tente novamente.');
            // }
        }
        //Scrool da tela de Login

        window.sr = ScrollReveal({ reset: true });
        sr.reveal(".container-login", {
            duration: 1500,
            distance: '20px',
            origin: 'top'
        });

        //Função Ìcone de Abrir/Fechar Olhos (password)

        function viewPassword() {
            const passwordInput = document.getElementById("senha");
            const togglePasswordIcon = document.getElementById("togglePassword");

            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                togglePasswordIcon.src = "imagens/olhoaberto.png";
            } else {
                passwordInput.type = "password";
                togglePasswordIcon.src = "imagens/olhofechado.png";
            }
        }
    </script>
</body>
</html>
